<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mina Sombria - Jogo Vampírico</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&display=swap');
        
        body {
            font-family: 'IM Fell English SC', serif;
            background-color: #0a0408;
            color: #e0b0d0;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .vampire-button {
            background: linear-gradient(to bottom, #2a0a22 0%, #1a0515 100%);
            border: 1px solid #6b2737;
            color: #d9a3b3;
            text-shadow: 0 0 5px #ff0000;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .vampire-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 0, 0, 0.4);
            color: #fff;
            text-shadow: 0 0 10px #ff0000;
        }
        
        .vampire-button:active {
            transform: translateY(0);
        }
        
        .vampire-button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
            transition: all 0.3s;
        }
        
        .vampire-button:hover::after {
            left: 100%;
        }
        
        .blood-drop {
            position: absolute;
            background-color: rgba(139, 0, 0, 0.7);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10;
        }
        
        .mine-area {
            background: linear-gradient(rgba(10, 4, 8, 0.7), rgba(10, 4, 8, 0.7)), 
                        url('https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/75ab8333-454a-4403-aa92-c48ffa461bd6.png');
            background-size: cover;
            background-position: center;
            border: 2px solid #6b2737;
            position: relative;
            overflow: hidden;
        }
        
        .resource-sparkle {
            position: absolute;
            width: 5px;
            height: 5px;
            background-color: rgba(255, 215, 0, 0.8);
            border-radius: 50%;
            pointer-events: none;
            z-index: 5;
        }
        
        .bat-animation {
            position: absolute;
            width: 30px;
            height: 20px;
            background-size: contain;
            background-repeat: no-repeat;
            pointer-events: none;
            z-index: 3;
            animation: fly 15s linear infinite;
        }
        
        @keyframes fly {
            0% {
                transform: translateX(-100px) rotateY(180deg);
            }
            100% {
                transform: translateX(calc(100vw + 100px)) rotateY(180deg);
            }
        }
        
        .pulse {
            animation: pulse 1s infinite alternate;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
                box-shadow: 0 0 5px rgba(255, 0, 0, 0.5);
            }
            100% {
                transform: scale(1.05);
                box-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
            }
        }
    </style>
</head>
<body class="p-4">
    <header class="text-center mb-8">
        <h1 class="text-4xl md:text-5xl font-bold text-red-900 mb-2">Mina Sombria</h1>
        <div class="flex justify-center gap-8">
            <div class="text-center">
                <h3 class="text-xl text-purple-200">Sangue Coletado</h3>
                <p id="blood-count" class="text-3xl text-red-400">0</p>
            </div>
            <div class="text-center">
                <h3 class="text-xl text-purple-200">Ossos</h3>
                <p id="bone-count" class="text-3xl text-gray-300">0</p>
            </div>
            <div class="text-center">
                <h3 class="text-xl text-purple-200">Almas</h3>
                <p id="soul-count" class="text-3xl text-blue-300">0</p>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto">
        <section class="mine-area rounded-lg h-64 w-full mb-8 flex items-center justify-center cursor-crosshair relative" id="mine">
            <img src="https://storage.googleapis.com/workspace-0f70711f-8b4e-4d94-86f1-2a93ccde5887/image/018095fd-60c0-420a-b233-95086bfc6956.png" 
                 alt="Interior de caverna vampírica com paredes de pedra negra e veios de cristais vermelhos sangrentos" 
                 class="opacity-30 w-full h-full object-cover" />
            <div class="absolute inset-0 flex items-center justify-center">
                <p class="text-xl text-center p-4 bg-black bg-opacity-50 rounded-lg">
                    Clique na mina para extrair recursos<br>
                    <span class="text-sm text-red-300">Cada clique rende 1 unidade de Sangue</span>
                </p>
            </div>
        </section>

        <section class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="bg-black bg-opacity-30 p-4 rounded-lg border border-purple-900">
                <h3 class="text-xl text-red-300 mb-2">Upgrades de Garra</h3>
                <div class="space-y-2">
                    <div>
                        <button class="vampire-button w-full p-2 rounded mb-1 upgrade-btn" data-cost="100" data-resource="blood" data-upgrade="click-power">
                            Garras Afiadas (Nível 1)<br>
                            <span class="text-xs">+2 Sangue por clique</span>
                            <span class="block text-yellow-300">Custo: 100 Sangue</span>
                        </button>
                    </div>
                    <div>
                        <button class="vampire-button w-full p-2 rounded mb-1 upgrade-btn" data-cost="500" data-resource="blood" data-upgrade="click-power-2">
                            Garras Venenosas (Nível 2)<br>
                            <span class="text-xs">+5 Sangue por clique</span>
                            <span class="block text-yellow-300">Custo: 500 Sangue</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="bg-black bg-opacity-30 p-4 rounded-lg border border-purple-900">
                <h3 class="text-xl text-red-300 mb-2">Servos Vampíricos</h3>
                <div class="space-y-2">
                    <div>
                        <button class="vampire-button w-full p-2 rounded mb-1 auto-clicker-btn" data-cost="50" data-resource="bones" data-upgrade="vampire-1">
                            Morcego Familiar<br>
                            <span class="text-xs">0.2 Sangue/seg</span>
                            <span class="block text-yellow-300">Custo: 50 Ossos</span>
                        </button>
                        <p class="text-sm" id="vampire-1-count">0 possuídos</p>
                    </div>
                    <div>
                        <button class="vampire-button w-full p-2 rounded mb-1 auto-clicker-btn" data-cost="250" data-resource="bones" data-upgrade="vampire-2">
                            Vampiro Júnior<br>
                            <span class="text-xs">1 Sangue/seg</span>
                            <span class="block text-yellow-300">Custo: 250 Ossos</span>
                        </button>
                        <p class="text-sm" id="vampire-2-count">0 possuídos</p>
                    </div>
                </div>
            </div>

            <div class="bg-black bg-opacity-30 p-4 rounded-lg border border-purple-900">
                <h3 class="text-xl text-red-300 mb-2">Rituais Sombrios</h3>
                <div class="space-y-2">
                    <div>
                        <button class="vampire-button w-full p-2 rounded mb-1 ritual-btn" data-cost="100" data-resource="souls" data-upgrade="ritual-1">
                            Ritual de Transformação<br>
                            <span class="text-xs">Converte 100 Sangue em 1 Osso</span>
                            <span class="block text-yellow-300">Custo: 1 Alma</span>
                        </button>
                    </div>
                    <div>
                        <button class="vampire-button w-full p-2 rounded mb-1 ritual-btn" data-cost="1000" data-resource="souls" data-upgrade="ritual-2">
                            Sacrifício Sanguinário<br>
                            <span class="text-xs">Converte 1000 Sangue em 1 Alma</span>
                            <span class="block text-yellow-300">Custo: 10 Ossos</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Game state
        const gameState = {
            blood: 0,
            bones: 0,
            souls: 0,
            clickPower: 1,
            upgrades: {
                'click-power': false,
                'click-power-2': false,
                'vampire-1': 0,
                'vampire-2': 0
            },
            autoClickers: {
                'vampire-1': {
                    rate: 0.2,
                    cost: 50
                },
                'vampire-2': {
                    rate: 1,
                    cost: 250
                }
            },
            rituals: {
                'ritual-1': {
                    bloodCost: 100,
                    boneReward: 1,
                    soulCost: 1
                },
                'ritual-2': {
                    bloodCost: 1000,
                    soulReward: 1,
                    boneCost: 10
                }
            }
        };

        // DOM elements
        const mineArea = document.getElementById('mine');
        const bloodCountElement = document.getElementById('blood-count');
        const boneCountElement = document.getElementById('bone-count');
        const soulCountElement = document.getElementById('soul-count');

        // Auto-clicker interval
        let autoClickerInterval;

        // Initialize game
        function initGame() {
            updateUI();
            loadGame();
            startAutoClickers();
            
            // Add bats for atmosphere
            spawnBats();
            setInterval(spawnBats, 10000);
        }

        // Save game to localStorage
        function saveGame() {
            localStorage.setItem('vampireMineSave', JSON.stringify(gameState));
        }

        // Load game from localStorage
        function loadGame() {
            const savedGame = localStorage.getItem('vampireMineSave');
            if (savedGame) {
                const parsedGame = JSON.parse(savedGame);
                Object.assign(gameState, parsedGame);
                updateUI();
            }
        }

        // Start auto-clickers
        function startAutoClickers() {
            if (autoClickerInterval) clearInterval(autoClickerInterval);
            
            autoClickerInterval = setInterval(() => {
                let bloodPerSecond = 0;
                
                // Calculate blood from all auto-clickers
                bloodPerSecond += gameState.upgrades['vampire-1'] * 0.2;
                bloodPerSecond += gameState.upgrades['vampire-2'] * 1;
                
                if (bloodPerSecond > 0) {
                    gameState.blood += bloodPerSecond;
                    updateResourceCounters();
                    createSparkles(Math.floor(bloodPerSecond));
                }
            }, 1000);
        }

        // Update all UI elements
        function updateUI() {
            updateResourceCounters();
            updateUpgradeButtons();
            updateAutoClickerCounts();
        }

        // Update resource counters
        function updateResourceCounters() {
            bloodCountElement.textContent = Math.floor(gameState.blood);
            boneCountElement.textContent = gameState.bones;
            soulCountElement.textContent = gameState.souls;
        }

        // Update upgrade buttons state
        function updateUpgradeButtons() {
            document.querySelectorAll('.upgrade-btn, .auto-clicker-btn, .ritual-btn').forEach(button => {
                const resource = button.getAttribute('data-resource');
                const cost = parseInt(button.getAttribute('data-cost'));
                
                if (gameState[resource] >= cost) {
                    button.disabled = false;
                    button.classList.remove('opacity-50');
                    button.classList.add('pulse');
                } else {
                    button.disabled = true;
                    button.classList.add('opacity-50');
                    button.classList.remove('pulse');
                }
            });
        }

        // Update auto-clicker counts
        function updateAutoClickerCounts() {
            document.getElementById('vampire-1-count').textContent = 
                `${gameState.upgrades['vampire-1']} possuídos`;
            document.getElementById('vampire-2-count').textContent = 
                `${gameState.upgrades['vampire-2']} possuídos`;
        }

        // Handle mine click
        mineArea.addEventListener('click', (e) => {
            // Add blood
            gameState.blood += gameState.clickPower;
            
            // Create blood drop effect
            createBloodDrop(e);
            
            // Create sparkle
            createSparkles(gameState.clickPower);
            
            // Update UI
            updateResourceCounters();
            updateUpgradeButtons();
            
            // Save game
            saveGame();
        });

        // Create blood drop effect
        function createBloodDrop(event) {
            const drop = document.createElement('div');
            drop.classList.add('blood-drop');
            
            const size = Math.random() * 10 + 5;
            const x = event.clientX - mineArea.getBoundingClientRect().left;
            const y = event.clientY - mineArea.getBoundingClientRect().top;
            
            drop.style.width = `${size}px`;
            drop.style.height = `${size}px`;
            drop.style.left = `${x}px`;
            drop.style.top = `${y}px`;
            
            mineArea.appendChild(drop);
            
            // Animation
            setTimeout(() => {
                drop.style.transform = `translateY(${Math.random() * 30 + 20}px)`;
                drop.style.opacity = '0';
                setTimeout(() => {
                    mineArea.removeChild(drop);
                }, 1000);
            }, 50);
        }

        // Create resource sparkles
        function createSparkles(count) {
            for (let i = 0; i < count; i++) {
                const sparkle = document.createElement('div');
                sparkle.classList.add('resource-sparkle');
                
                const x = Math.random() * mineArea.offsetWidth;
                const y = Math.random() * mineArea.offsetHeight;
                
                sparkle.style.left = `${x}px`;
                sparkle.style.top = `${y}px`;
                
                mineArea.appendChild(sparkle);
                
                // Animation
                setTimeout(() => {
                    sparkle.style.transform = `translate(${Math.random() * 40 - 20}px, ${Math.random() * 40 - 20}px)`;
                    sparkle.style.opacity = '0';
                    setTimeout(() => {
                        mineArea.removeChild(sparkle);
                    }, 1000);
                }, 50);
            }
        }

        // Spawn bats for atmosphere
        function spawnBats() {
            const batCount = Math.floor(Math.random() * 3) + 1;
            
            for (let i = 0; i < batCount; i++) {
                const bat = document.createElement('div');
                bat.classList.add('bat-animation');
                
                // Use text as placeholder for bat image
                bat.innerHTML = '🦇';
                bat.style.top = `${Math.random() * 100}%`;
                bat.style.animationDelay = `${Math.random() * 5}s`;
                
                document.body.appendChild(bat);
                
                setTimeout(() => {
                    document.body.removeChild(bat);
                }, 15000);
            }
        }

        // Handle upgrade purchases
        document.querySelectorAll('.upgrade-btn').forEach(button => {
            button.addEventListener('click', () => {
                const resource = button.getAttribute('data-resource');
                const cost = parseInt(button.getAttribute('data-cost'));
                const upgrade = button.getAttribute('data-upgrade');
                
                if (gameState[resource] >= cost) {
                    gameState[resource] -= cost;
                    
                    // Apply upgrade
                    if (upgrade === 'click-power') {
                        gameState.clickPower += 2;
                        gameState.upgrades[upgrade] = true;
                        button.disabled = true;
                        button.textContent = 'Comprado!';
                    } else if (upgrade === 'click-power-2') {
                        gameState.clickPower += 5;
                        gameState.upgrades[upgrade] = true;
                        button.disabled = true;
                        button.textContent = 'Comprado!';
                    }
                    
                    updateUI();
                    saveGame();
                }
            });
        });

        // Handle auto-clicker purchases
        document.querySelectorAll('.auto-clicker-btn').forEach(button => {
            button.addEventListener('click', () => {
                const resource = button.getAttribute('data-resource');
                const cost = parseInt(button.getAttribute('data-cost'));
                const upgrade = button.getAttribute('data-upgrade');
                
                if (gameState[resource] >= cost) {
                    gameState[resource] -= cost;
                    gameState.upgrades[upgrade]++;
                    
                    updateUI();
                    saveGame();
                    startAutoClickers(); // Restart to include new auto-clicker
                }
            });
        });

        // Handle ritual actions
        document.querySelectorAll('.ritual-btn').forEach(button => {
            button.addEventListener('click', () => {
                const resource = button.getAttribute('data-resource');
                const cost = parseInt(button.getAttribute('data-cost'));
                const upgrade = button.getAttribute('data-upgrade');
                
                if (gameState[resource] >= cost) {
                    const ritual = gameState.ritals[upgrade];
                    
                    if (upgrade === 'ritual-1') {
                        // Blood to Bones
                        if (gameState.blood >= ritual.bloodCost) {
                            gameState.blood -= ritual.bloodCost;
                            gameState.souls -= ritual.soulCost;
                            gameState.bones += ritual.boneReward;
                        }
                    } else if (upgrade === 'ritual-2') {
                        // Blood and Bones to Souls
                        if (gameState.blood >= ritual.bloodCost && gameState.bones >= ritual.boneCost) {
                            gameState.blood -= ritual.bloodCost;
                            gameState.bones -= ritual.boneCost;
                            gameState.souls += ritual.soulReward;
                        }
                    }
                    
                    updateUI();
                    saveGame();
                }
            });
        });

        // Initialize game when loaded
        window.addEventListener('load', initGame);
    </script>
</body>
</html>

